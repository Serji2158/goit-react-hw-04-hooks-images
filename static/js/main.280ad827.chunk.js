(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{12:function(e,t,a){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__OwWpo",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__hjMQc"}},13:function(e,t,a){e.exports={overlay:"Modal_overlay__lnVnu",modal:"Modal_modal__3pr2j"}},18:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(4),c=a.n(n),o=(a(18),a(3)),s=a(2),i=a.n(s),u=a(7),l=a(10),m="https://pixabay.com/api/",j="23675334-f5a1abcfe20e79567add0d4e1";var b={fetchGallery:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return fetch("".concat(m,"?q=").concat(e,"&page=").concat(t,"&key=").concat(j,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u041d\u0435\u0442 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c ".concat(e)))}))}},h=b,d=a(9),g=a.n(d),p=a(12),f=a.n(p),O=a(13),y=a.n(O),_=a(1),x=document.querySelector("#modal-root"),I=function(e){var t=e.hideModal,a=e.largeImage;return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.code&&t(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]),Object(n.createPortal)(Object(_.jsx)("div",{className:y.a.overlay,onClick:function(e){e.target===e.currentTarget&&t(e)},children:Object(_.jsx)("div",{className:y.a.modal,children:Object(_.jsx)("img",{src:a,alt:""})})}),x)};I.propType={largeImage:i.a.string.isRequired,hideModal:i.a.func.isRequired};var v=I,S=function(e){var t=e.gallery,a=Object(r.useState)(!1),n=Object(o.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(""),u=Object(o.a)(i,2),l=u[0],m=u[1],j=function(e){s((function(e){return!e})),m(e.target.id||"")};return Object(_.jsxs)(_.Fragment,{children:[t.map((function(e){return Object(_.jsx)("li",{className:f.a.imageGalleryItem,children:Object(_.jsx)("img",{className:f.a.imageGalleryItemImage,src:e.webformatURL,alt:"",id:e.largeImageURL,onClick:j})},e.id)})),c&&Object(_.jsx)(v,{hideModal:j,largeImage:l})]})};S.propType={gallery:i.a.array.isRequired,onClick:i.a.func.isRequired};var B=S,q=function(e){var t=e.increasePage,a=e.query,n=e.page,c=Object(r.useState)([]),s=Object(o.a)(c,2),i=s[0],u=s[1],m=Object(r.useState)(!1),j=Object(o.a)(m,2),b=j[0],d=j[1],p=Object(r.useState)(null),f=Object(o.a)(p,2),O=f[0],y=f[1],x=Object(r.useState)(!1),I=Object(o.a)(x,2),v=I[0],S=I[1];return Object(r.useEffect)((function(){""!==a&&(d(!0),h.fetchGallery(a,n).then((function(e){var t=e.hits;u((function(e){return 1===n?Object(l.a)(t):[].concat(Object(l.a)(e),Object(l.a)(t))})),S(!0)})).catch((function(e){return y(e)})).finally((function(){return d(!1)})))}),[n,a]),Object(r.useEffect)((function(){1!==n&&document.body.scrollIntoView({behavior:"smooth",block:"end"})}),[i]),Object(_.jsxs)(_.Fragment,{children:[O&&Object(_.jsxs)("p",{children:["Whoops, something went wrong: ",O.message]}),b&&Object(_.jsx)("p",{children:"Loading..."}),!a&&Object(_.jsx)("div",{className:g.a.infoBox,children:"Enter you request, please."}),i.length>0&&Object(_.jsx)("ul",{className:g.a.ImageGallery,children:Object(_.jsx)(B,{gallery:i})}),v&&Object(_.jsx)("button",{type:"button",className:g.a.Button,onClick:t,children:"LOAD MORE"})]})};q.propType={query:i.a.string.isRequired,increasePage:i.a.func.isRequired,page:i.a.number.isRequired};var F=q,w=a(5),G=a.n(w),k=function(e){var t=e.onSubmit,a=Object(r.useState)(""),n=Object(o.a)(a,2),c=n[0],s=n[1];return Object(_.jsx)("header",{className:G.a.searchBar,children:Object(_.jsxs)("form",{className:G.a.searchForm,onSubmit:function(e){if(e.preventDefault(),""===c.trim())return u.b.error("Put your query,please !",{position:u.b.POSITION.TOP_LEFT});t(c),s("")},children:[Object(_.jsx)("button",{type:"submit",className:G.a.searchFormButton,children:Object(_.jsx)("span",{className:G.a.searchFormButtonLabel,children:"Search"})}),Object(_.jsx)("input",{className:G.a.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){s(e.currentTarget.value.toLowerCase())},value:c})]})})};k.propType={onSubmit:i.a.func};var E=k,L=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(1),s=Object(o.a)(c,2),i=s[0],l=s[1];return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(E,{onSubmit:function(e){n(e),l(1)}}),Object(_.jsx)(F,{query:a,page:i,increasePage:function(){l((function(e){return e+1}))}}),Object(_.jsx)(u.a,{autoClose:3e3})]})};L.propType={query:i.a.string.isRequired,page:i.a.string.isRequired};var N=L;c.a.render(Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(N,{})}),document.getElementById("root"))},5:function(e,t,a){e.exports={searchBar:"SearchBar_searchBar__2aVV3",searchForm:"SearchBar_searchForm__3V90q",searchFormButton:"SearchBar_searchFormButton__EUsLA",searchFormButtonLabel:"SearchBar_searchFormButtonLabel__3z3tH",searchFormInput:"SearchBar_searchFormInput__3E9k0"}},9:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__drdTm",Button:"ImageGallery_Button__2hq9L",infoBox:"ImageGallery_infoBox__1Qf5u"}}},[[22,1,2]]]);
//# sourceMappingURL=main.280ad827.chunk.js.map